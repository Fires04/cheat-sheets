= Aruba and HP switches debug and diagnostics commands cheat sheet
Yuri SLobodyanyuk, admin@yurisk.info
:homepage: https://yurisk.info
:toc:

Author: Yuri Slobodyanyuk,  https://www.linkedin.com/in/yurislobodyanyuk/

NOTE: All commands were tested on HP/Aruba 5400 switches.


== General Health
[cols=2, options="header"]
|===
|Command
|Description

|*show cpu [_seconds_]*
|Show CPU stats of average load for 1 second, 5 seconds, and 1 minute, optionally setting period in _seconds_ (300 is max).

| *show logging -r*
| Show system logs and events in reverse chronological order, i.e. newest logs first.

|*clear log*
|Delete all logs on the switch.
|===


[cols=2,options="header"]
|===
|Command
|Description 



|*debug destination buffer*
|Direct debug output to the log buffer, to be read later on CLI.

|*debug <daemon name>*
|Start runnig debug,e.g. to debug SNMP daemon: `debug snmp pdu`

|*show debug buffer*
|Show log buffer with the collected debug output.

|*show debug*
|Show what debug is currently active.

|*show mac-address*
|Show table of MAC addresses.

|===

== Interfaces
[cols=2,options="header"]
|===
|Command
|Description 

|*show interface status*
| Show list of all interfaces with info for each: state (Up/Down), Actual Speed, Tagged or not, VLANs configured for the interface (single VLAN for Untagged, `multiple` for Tagged). NOTE: In Cisco world Tagged interface is called *trunk*.

|*display interface [_name_]*
|Show detailed information of an interface: media type, speed/duplex state, MAC address, up/down, max frame size, VLAN id if any untagged set and `.` (dot) for 
multiple tagged VLANs, input/output erros, buffer failures, CRCs, runts. 

|*conf t*

*int _name_*

*disable/enable*
|Disable/enable a specific interface (in Cisco world `shut`/`no shut`)

|*show interface transceiver [_name_] [detail]*
|Info on installed optical transceivers: Port number where installed, Type/Speed, Serial Number. If _detail_ is added, will also show temperature, voltage, Transmit (TX) and Receive (RX) power in mW and dBm.

|*show ip*
| Show all configured IP addresses on a switch.

|*show name*
|Lists all interfaces with their names if set. In Cisco it would be `show int description`

|*show trunk*
| Show trunk interfaces with their state and type. NOTE: In HP/Aruba world *trunk* means aggregated interfaces (LACP), what in Cisco world is called port/ether-channel.

|*show trunk-statistics <trunk name>*
| Show cumulative statistics for the trunk interface: packets passed, bytes received, drops if any.

|*show lacp*
|Show LACP state on the trunking interfaces.

|===



[cols=2,options="header"]
|===
|Command
|Description 

|*display stp root*
| Show root switch for Spanning Tree Protocol.

|*display stp brief*
| Short information on STP state for VLANs.

|*display lldp neighbor list*
|Display LLDP neighbors.


|*show ip ospf neighbor [detail]*
|Display OSPF neighbors

|*show ip route*
| Show routing table for Layer 3 switch.

|*show ip*
| Show IP routing state: disabled/enabled. It is disabled by default, to enable: *(config)# ip routing* on platforms that support Layer 3 routing.


|*display boot-loader*
| Show what image will be loaded on the next boot.


|*show time*
|Show switch time and date, for log correlation.


|*show power-over-ethernet brief/ethernet*
|Show state of PoE-enabled interfaces, including information on drawn/available
power.





|===




