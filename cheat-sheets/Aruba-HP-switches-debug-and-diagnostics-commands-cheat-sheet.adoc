= Aruba and HP switches debug and diagnostics commands cheat sheet
Yuri SLobodyanyuk, admin@yurisk.info
:homepage: https://yurisk.info
:toc:

Author: Yuri Slobodyanyuk,  https://www.linkedin.com/in/yurislobodyanyuk/

NOTE: All commands were tested on HP/Aruba 5400 switches.


== General Health
[cols=2, options="header"]
|===
|Command
|Description

|*show cpu [_seconds_]*
|Show CPU stats of average load for 1 second, 5 seconds, and 1 minute, optionally setting period in _seconds_ (300 is max).


|*show time*
|Show switch time and date, for log correlation.


|*display boot-loader*
| Show what image will be loaded on the next boot.

|===

== Logs
[cols=2, options="header"]
|===
|Command
|Description

| *show logging -r*
| Show system logs and events in reverse chronological order, i.e. newest logs first.

|*clear log*
|Delete all logs on the switch.

|*show log -s*
|Display logs from the Standby commander/member in a VSF stack.

|*show log -b*
|Show logs with time since boot instead of date/time format.
|===



[cols=2,options="header"]
|===
|Command
|Description 



|*debug destination buffer*
|Direct debug output to the log buffer, to be read later on CLI.

|*debug <daemon name>*
|Start runnig debug,e.g. to debug SNMP daemon: `debug snmp pdu`

|*show debug buffer*
|Show log buffer with the collected debug output.

|*show debug*
|Show what debug is currently active.

|*show mac-address*
|Show table of MAC addresses.

|===

== Interfaces
[cols=2,options="header"]
|===
|Command
|Description 

|*show interface status*
| Show list of all interfaces with info for each: state (Up/Down), Actual Speed, Tagged or not, VLANs configured for the interface (single VLAN for Untagged, `multiple` for Tagged). NOTE: In Cisco world Tagged interface is called *trunk*.

|*display interface [_name_]*
|Show detailed information of an interface: media type, speed/duplex state, MAC address, up/down, max frame size, VLAN id if any untagged set and `.` (dot) for 
multiple tagged VLANs, input/output erros, buffer failures, CRCs, runts. 

|*conf t*

*int _name_*

*disable/enable*
|Disable/enable a specific interface (in Cisco world `shut`/`no shut`)

|*show interface transceiver [_name_] [detail]*
|Info on installed optical transceivers: Port number where installed, Type/Speed, Serial Number. If _detail_ is added, will also show temperature, voltage, Transmit (TX) and Receive (RX) power in mW and dBm.

|*show ip*
| Show all configured IP addresses on a switch.

|*show name*
|Lists all interfaces with their names if set. In Cisco it would be `show int description`

|*show trunk*
| Show trunk interfaces with their state and type. NOTE: In HP/Aruba world *trunk* means aggregated interfaces (LACP), what in Cisco world is called port/ether-channel.

|*show trunk-statistics <trunk name>*
| Show cumulative statistics for the trunk interface: packets passed, bytes received, drops if any.

|*show lacp*
|Show LACP state on the trunking interfaces.

|===

== Daemons Real-Time Debug 

[cols=2,options="header"]
|===
|Command
|Description

|*show debug*
|Show currently enabled debug

|*debug destination <logging/session/buffer>*
|Set location to output the debug to (default `none`): 

`logging` - send the debug to the configured (if any) syslog server.

`session` - send to the terminal (Cisco analog of `term mon`).

`buffer` - send to the switch memory buffer.

|*debug <daemon name>*
a|enable real-time debug of the specified daemon. The daemons are:

*  `acl`                   Displays debug messages for access control lists.
* `all`                   Display all debug messages.
*  `aruba-central`         Display Aruba Central server debug information.
* `bfd`                   Enable BFD debug logging.
* `cdp`                   Display CDP information.
* `cfg-restore`           Display cfg-restore debug messages.
* `dhcp-server`           Display DHCP server debug messages.
* `distributed-trunking`  Display DT debug messages.
* `est`                   Display EST debug messages.
* `event`                 Display event log messages.
* `ip`                    Display debug messages for IPv4.
* `ip-sla`                Enable debug logs for IP SLA.
* `ipv6`                  Enable debug messages for IPv6.
* `lacp`                  Display LACP information.
* `lldp`                  Display LLDP information.
* `mdns`                  Display mDNS debug messages.
* `mstp`                  Display MSTP debug messages.
* `mvrp`                  Enable MVRP debug messages.
* `ntp`                   Display debug messages for NTP.
* `openflow`              Display all OpenFlow packets.
* `rest-interface`        Display REST debug information.
* `rpvst`                 Display RPVST debug messages.
* `security`              Display all Security messages.
* `services`              Display debug messages on services module.
* `smart-link`            Display Smart link debug messages.
* `snmp`                  Display SNMP debug messages.
* `time-stamp`            Enable/disable system-time to be associated with debug messages.
* `tunnel`                Display tunnel debug messages.
* `udld`                  Display UDLD debug messages.
* `uplink-failure-detection` Display UFD debug messages.
* `usertn`                Displays authentication module log messages for user-based tunneled node
* `vrrp`                  Display VRRP debug messages.
* `ztp`                   Display ZTP debug messages.


|*debug ip <routing process>*
a|Debug various routing processes. The _routing process_ is one of the:

* `bgp`                   Display all BGP routing messages.
* `client-tracker`        Displays debug messages for IP client tracker.
* `fib`                   Display IP Forwarding Information Base messages & events.
* `forwarding`            Display IPv4 forwarding messages.
* `iface`                 Display interface management messages.
* `igmp`                  Display all IGMP messages.
* `ospf`                  Display all OSPF routing messages.
* `ospfv3`                [Deprecated] Enable debug messages for OSPFv3.
* `packet`                Display IPv4 packet messages.
* `pbr`                   Enable debug messages for PBR.
* `pim`                   Enable/disable tracing of PIM messages.
* `rip`                   Display all RIP routing messages.

|===

== Spanning Tree Protocol (STP)
[cols=2,options="header"]
|===
|Command
|Description 

|*display stp root*
| Show root switch for Spanning Tree Protocol.

|*display stp brief*
| Short information on STP state for VLANs.

|===

== Routing Info
[cols=2,options="header"]
|===
|Command
|Description

|*show ip*
| Show IP routing state: disabled/enabled. It is disabled by default, to enable: *(config)# ip routing* on platforms that support Layer 3 routing. Also displays list of all the interfaces/VLANs with IP address set.

|*show ip route*
|Show FIB - routing table the switch is currently using to forward the packets.





|*display lldp neighbor list*
|Display LLDP neighbors.


|*show ip ospf neighbor [detail]*
|Display OSPF neighbors








|*show power-over-ethernet brief/ethernet*
|Show state of PoE-enabled interfaces, including information on drawn/available
power.





|===




